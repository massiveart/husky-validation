define("validation-element",[],function(){return function(e,t){var n={trigger:"focusout",addclasses:!0},r=["validate","type","prop","trigger"],i,s={initialize:function(){this.options=$.extend({},n,t),this.$el=$(e),this.data=this.$el.data(),this.data.hasOwnProperty("trigger")&&(this.options.trigger=this.data.trigger),this.initValidators(),this.initType(),this.bindDomEvents(),this.$el.data("element",this);var r=this.$el.data("prop");console.log(r+": validators",this.validators),console.log(r+": type",this.type)},bindDomEvents:function(){var e=this.options.trigger?this.options.trigger:"";if(e===""||e==="none")return;this.$el.is("select")&&(e+=(new RegExp("change","i")).test(e)?"":" change"),e=e.replace(/^\s+/g,"").replace(/\s+$/g,""),this.$el.bind(e,this.validate.bind(this))},initValidators:function(){this.validators={},$.each(this.data,function(e,t){$.inArray(e,r)==-1&&!!t&&require(["validator/"+e],function(t){this.validators[e]=new t(this.$el)}.bind(this))}.bind(this))},initType:function(){this.type=null,this.data.hasOwnProperty("type")&&require(["type/"+this.data.type],function(e){this.type=new e(this.$el)}.bind(this))},validate:function(e){if(!this.hasConstraints())return this.reset(),!0;var t=!0;return $.each(this.validators,function(e,n){n.validate()||(t=!1)}),this.type!=null&&!this.type.validate()&&(t=!1),this.setValid(t),this.isValid()},hasConstraints:function(){return Object.keys(this.validators).length>0||this.type!=null},reset:function(){this.$el.removeClass("husky-validate-success"),this.$el.removeClass("husky-validate-error")},setValid:function(e){i=e,!this.options.addclasses||(this.reset(),e?this.$el.addClass("husky-validate-success"):this.$el.addClass("husky-validate-error"))},isValid:function(){return i},updateConstraint:function(e,t){if(!($.inArray(e,Object.keys(this.validators))>-1))throw"No constraint with name: "+e;this.validators[e].updateConstraint(t),this.validate(!0)},deleteConstraint:function(e){if(!($.inArray(e,Object.keys(this.validators))>-1))throw"No constraint with name: "+e;delete this.validators[e],this.$el.removeData(e),this.validate(!0)},addConstraint:function(e,t){if($.inArray(e,Object.keys(this.validators))!=-1)throw"Constraint with name: "+e+" already exists";require(["validator/"+e],function(n){this.validators[e]=new n(this.$el,t),this.validate(!0)}.bind(this))}};return s.initialize(),s}}),require.config({paths:{validation:"js/validation","validation-element":"js/element","type/default":"js/types/default","type/date":"js/types/date","type/decimal":"js/types/decimal","type/email":"js/types/email","type/url":"js/types/url","validator/default":"js/validators/default","validator/min":"js/validators/min","validator/max":"js/validators/max","validator/minlength":"js/validators/minlength","validator/maxlength":"js/validators/maxlength","validator/required":"js/validators/required"}}),define("validation",["validation-element"],function(e){return function(t,n){var r={submitEvent:!0,element:{trigger:"focusout",addclasses:!0}},i=[],s,o={initialize:function(){this.options=$.extend({},r,n),this.$el=t;var s=this.options.element;this.$el.find('*[data-validate="true"]').each(function(){i.push(new e(this,s))}),this.$el.data("validation",this),console.log("validation: elements",i),this.bindDomEvents()},bindDomEvents:function(){!this.options.submitEvent||this.$el.on("submit",function(){return this.validate()}.bind(this))},validate:function(){var e=!0;return $.each(i,function(t,n){n.validate()||(e=!1)}),s=e,e},isValid:function(){return s},updateConstraint:function(e,t,n){var r=$(e);if(!r.data("element"))throw"No validation element";$(e).data("element").updateConstraint(t,n)},deleteConstraint:function(e,t){var n=$(e);if(!n.data("element"))throw"No validation element";n.data("element").deleteConstraint(t)},addConstraint:function(t,n,r){var s=$(t);if(!s.data("element")){var o=new e(s,this.options.element);o.addConstraint(n,r),i.push(o)}else s.data("element").addConstraint(n,r)}};return o.initialize(),o}}),define("type/default",[],function(){return function(e,t,n,r){return{name:r,initialize:function(){this.$el=e,this.data=$.extend(t,this.$el.data(),n),this.updateData(),!this.initializeSub||this.initializeSub()},updateConstraint:function(e){this.data=$.extend({},this.data,e),this.updateData()},updateData:function(){$.each(this.data,function(e,t){this.$el.data(e,t)}.bind(this))}}}}),define("type/date",["type/default"],function(e){return function(t,n){var r={regExp:/^(\d{4})\D?(0[1-9]|1[0-2])\D?([12]\d|0[1-9]|3[01])$/},i=$.extend({},new e(t,r,n,"date"),{initializeSub:function(){},validate:function(){return this.data.regExp.test(this.$el.val())}});return i.initialize(),i}}),define("type/decimal",["type/default"],function(e){return function(t,n){var r={regExp:/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/},i=$.extend({},new e(t,r,n,"decimal"),{initializeSub:function(){},validate:function(){return this.data.regExp.test(this.$el.val())}});return i.initialize(),i}}),define("type/email",["type/default"],function(e){return function(t,n){var r={regExp:/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))){2,6}$/i},i=$.extend({},new e(t,r,n,"email"),{validate:function(){return this.data.regExp.test(this.$el.val())}});return i.initialize(),i}}),define("type/url",["type/default"],function(e){return function(t,n){var r={regExp:/^(https?|s?ftp|git):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i},i=$.extend({},new e(t,r,n,"url"),{validate:function(){var e=this.$el.val();return this.data["url-strict"]!=="true"&&(e=(new RegExp("(https?|s?ftp|git)","i")).test(e)?e:"http://"+e),this.data.regExp.test(e)}});return i.initialize(),i}}),define("validator/default",[],function(){return function(e,t,n,r){return{name:r,initialize:function(){this.$el=e,this.data=$.extend(t,this.$el.data(),n),this.updateData(),!this.initializeSub||this.initializeSub()},updateConstraint:function(e){this.data=$.extend({},this.data,e),this.updateData()},updateData:function(){$.each(this.data,function(e,t){this.$el.data(e,t)}.bind(this))}}}}),define("validator/min",["validator/default"],function(e){return function(t){var n={min:0},r=$.extend({},new e(t,n,"min"),{validate:function(){var e=this.$el.val();return Number(e)>=this.data.min}});return r.initialize(),r}}),define("validator/max",["validator/default"],function(e){return function(t,n){var r={max:999},i=$.extend({},new e(t,r,n,"max"),{validate:function(){var e=this.$el.val();return Number(e)<=this.data.max}});return i.initialize(),i}}),define("validator/minlength",["validator/default"],function(e){return function(t,n){var r={minlength:0},i=$.extend({},new e(t,r,n,"minlength"),{validate:function(){var e=this.$el.val();return e.length>=this.data.minlength}});return i.initialize(),i}}),define("validator/maxlength",["validator/default"],function(e){return function(t,n){var r={maxlength:999},i=$.extend({},new e(t,r,n,"maxlength"),{validate:function(){var e=this.$el.val();return e.length<=this.data.maxlength}});return i.initialize(),i}}),define("validator/required",["validator/default"],function(e){return function(t,n){var r={},i=$.extend({},new e(t,r,n,"required"),{validate:function(){if(!!this.data.required){var e=this.$el.val();if("object"==typeof e){for(var t in e)if(this.validate(e[t]))return!0;return!1}return e.length>0&&""!==e.replace(/^\s+/g,"").replace(/\s+$/g,"")}return!0}});return i.initialize(),i}});